#!/usr/bin/env node
var fs = require( 'fs' );
var buble = require( '../dist/buble.umd.js' );

var args = process.argv.slice( 2 );

if ( args.length !== 1 ) {
	console.error( 'Usage: buble [file]' );
}

var source = fs.readFileSync( args[0], 'utf-8' );

try {
	var result = buble.transform( source ).code;
	console.log( result );
} catch ( err ) {
	console.error( err.message );
	if ( err.snippet ) console.error( '---\n' + err.snippet );
	if ( err.stack ) console.error( err.stack );

	process.exit( 1 );
}
